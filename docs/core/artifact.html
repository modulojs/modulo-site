<!DOCTYPE html><html><head><meta name="charset" charset="utf8" id="include_xxm0qoac"><meta name="content-type" http-equiv="Content-Type" content="text/html; charset=utf-8" id="include_xxnd8o0e"><meta name="viewport" content="width=device-width, initial-scale=1" id="include_x13l7u56"><meta name="robots" content="index, follow" id="include_xxriq75n"><meta name="revisit-after" content="30 days" id="include_x1m4jm9p"><link rel="stylesheet" href="../build-xxplgqrl.css">

<script defer="" src="../build-xxquecrj.js"></script>
</head><body><x-page rootat="https://modulohtml.org/">
        <meta charset="utf8">
        <title>Artifact - Modulo Documentation</title>
    
    <div class="layout Page">
        <nav class="page-nav Page">
            
            <a style="font-size:60px;text-align:center;display:block;font-weight:200" href="../" class="Page">ᵐ°dᵘ⁄o</a>
            <ul style="position: sticky; top: 1px" class="Page">
                <li class="toc--outer Page">
                    <p><a style="font-size: 70%" title="Download Modulo Docs as a offline-friendly zip" href="https://codeberg.org/modulo/docs/archive/main.zip" class="Page">
                            ⤓ docs-main.zip</a>
                        <tt>v0.1.0</tt>
                    </p>
                </li>
            
                
                    <li class="toc--outer Page"><h3 class="Page">       Modulo</h3></li>
                    <li class="toc--"><a href="../start/index.html" class="Page">           Introduction</a></li>
                
                    
                    <li class="toc--"><a href="../start/getting-started.html" class="Page"> Getting Started</a></li>
                
                    <li class="toc--outer Page"><h3 class="Page">           Definitions</h3></li>
                    <li class="toc--"><a href="../defs/overview.html" class="Page">         Overview</a></li>
                
                    
                    <li class="toc--"><a href="../defs/importing.html" class="Page">        Importing</a></li>
                
                    
                    <li class="toc--"><a href="../defs/definitions.html" class="Page">      Definition Types</a></li>
                
                    
                    <li class="toc--"><a href="../defs/processors.html" class="Page">       Processors</a></li>
                
                    
                    <li class="toc--"><a href="../defs/custom.html" class="Page">           Custom Types</a></li>
                
                    <li class="toc--outer Page"><h3 class="Page">  Templating</h3></li>
                    <li class="toc--"><a href="../templating/index.html" class="Page">      Language Overview</a></li>
                
                    
                    <li class="toc--"><a href="../templating/filters.html" class="Page">    Template Filters</a></li>
                
                    
                    <li class="toc--"><a href="../templating/tags.html" class="Page">       Template Tags</a></li>
                
                    <li class="toc--outer Page"><h3 class="Page">              Component Parts</h3></li>
                    <li class="toc--"><a href="../parts/props.html" class="Page">           Props</a></li>
                
                    
                    <li class="toc--"><a href="../parts/script.html" class="Page">          Script</a></li>
                
                    
                    <li class="toc--"><a href="../parts/state.html" class="Page">           State</a></li>
                
                    
                    <li class="toc--"><a href="../parts/staticdata.html" class="Page">      StaticData</a></li>
                
                    
                    <li class="toc--"><a href="../parts/style.html" class="Page">           Style</a></li>
                
                    
                    <li class="toc--"><a href="../parts/template.html" class="Page">        Template</a></li>
                
                    <li class="toc--outer Page"><h3 class="Page">           Core Definitions</h3></li>
                    <li class="toc--active Page"><a href="../core/artifact.html" class="Page">         Artifact</a></li>
                
                    
                    <li class="toc--"><a href="../core/component.html" class="Page">        Component</a></li>
                
                    
                    <li class="toc--"><a href="../core/configuration.html" class="Page">    Configuration</a></li>
                
                    
                    <li class="toc--"><a href="../core/contentlist.html" class="Page">      ContentList</a></li>
                
                    
                    <li class="toc--"><a href="../core/include.html" class="Page">          Include</a></li>
                
                    
                    <li class="toc--"><a href="../core/library.html" class="Page">          Library</a></li>
                
                    <li class="toc--outer Page"><h3 class="Page">  Extension</h3></li>
                    <li class="toc--"><a href="../extension/engine.html" class="Page">      Upgrading Engines</a></li>
                
            </ul>
        </nav>
        <main class="page-container Page">
            
                
                    
                        <x-tableofcontents toc="[{&quot;match&quot;:&quot;&lt;h1 id=\&quot;artifact\&quot;&gt;Artifact&lt;/h1&gt;&quot;,&quot;level&quot;:1,&quot;attrs&quot;:&quot;id=\&quot;artifact\&quot;&quot;,&quot;title&quot;:&quot;Artifact&quot;,&quot;id&quot;:&quot;artifact&quot;},{&quot;match&quot;:&quot;&lt;h2 id=\&quot;overview\&quot;&gt;Overview&lt;/h2&gt;&quot;,&quot;level&quot;:2,&quot;attrs&quot;:&quot;id=\&quot;overview\&quot;&quot;,&quot;title&quot;:&quot;Overview&quot;,&quot;id&quot;:&quot;overview&quot;},{&quot;match&quot;:&quot;&lt;h5 id=\&quot;example1viewingandrunningbuiltincommands\&quot;&gt;Example #1: Viewing and running built-in commands&lt;/h5&gt;&quot;,&quot;level&quot;:5,&quot;attrs&quot;:&quot;id=\&quot;example1viewingandrunningbuiltincommands\&quot;&quot;,&quot;title&quot;:&quot;Example #1: Viewing and running built-in commands&quot;,&quot;id&quot;:&quot;example1viewingandrunningbuiltincommands&quot;},{&quot;match&quot;:&quot;&lt;h5 id=\&quot;example2custombuildbundle\&quot;&gt;Example #2: Custom Build + Bundle&lt;/h5&gt;&quot;,&quot;level&quot;:5,&quot;attrs&quot;:&quot;id=\&quot;example2custombuildbundle\&quot;&quot;,&quot;title&quot;:&quot;Example #2: Custom Build + Bundle&quot;,&quot;id&quot;:&quot;example2custombuildbundle&quot;}]" modulo-mount-html=""><nav class="regular&quot;=&quot;">
        <div> </div>
        <div>
            <div>
                <label>[ <input name="show" type="checkbox"> Table of Contents ]</label>
                <label title="Stick to upper right">[ <span alt="upper right arrow">↗</span>
                    <input name="sticky" type="checkbox"> ]</label>
            </div>
            
                <ul>
                    
                        
                            <li style="--level: 1">
                                    <a href="#artifact">Artifact</a>
                            </li>
                        
                    
                        
                            <li style="--level: 2">
                                    <a href="#overview">Overview</a>
                            </li>
                        
                    
                        
                    
                        
                    
                </ul>
            
        </div>
    </nav></x-tableofcontents>
                    
                    <div class="markdown-body"><h1 id="artifact">Artifact</h1>
<blockquote>
  <p><strong>How Slim Can Modulo.html get?</strong> Modulo's runtime itself is only about 40kb
  after being trimmed for a build.  Modulo's built-in artifacts will
  automatically "trim" (minify) it's own source code, but make no attempts to
  trim other sources.</p>
</blockquote>
<p>The <em>Artifact</em> definition is how you can specify custom build
artifacts. When the build command is run, Modulo loops through all defined
Artifacts and outputs the files they generate. This is how the JS, CSS, and
HTML files get generated whenever you run build by default. For most users,
this is enough--this website uses the default Artifacts, for example. However,
if you want to create custom build outputs for advanced usage in building a
SSG-powered site, then you can use this feature to create as many extra files
per HTML file you SSG as you'd like. For example, you could loop through
images, generating a "thumbnail" page for each one. It's very versatile, and
gives you the full power of the Modulo templating language for JS, CSS, and
prerendered / SSR'ed HTML.</p>
<p>It manages to be this versatile by functioning as a mini-scripting system
for specifying and configuring builds, allowing for easy addition of
minification, split bundles, or other file types. This gives very fine-grained
control over output in a declarative way.</p>
<h2 id="overview">Overview</h2>
<ul>
<li>Simply by registering an Artifact (<code>&lt;Artifact name="css"&gt;</code>, for example), you can begin
to customize or add CSS output</li>
<li>By adding a <code>remove=</code> to your Artifact, you can scrub your HTML before saving
the built version, e.g. <code>remove="div.delete-me"</code> to remove all divs with
<code>delete-me</code> class.</li>
<li>By adding a <code>bundle=</code> to your Artifact, you can specify which elements get
bundled, or disable it with <code>bundle:=false</code></li>
<li>Now you can register things like JavaScript, CSS, or HTML minifiers as
Template filters, and then include them into your build configurations</li>
<li>Using the Modulo Template syntax allows for extremely precise control over
the exact JavaScript and CSS output.</li>
</ul>
<h5 id="example1viewingandrunningbuiltincommands">Example #1: Viewing and running built-in commands</h5>
<ol>
<li><p>Step 1: Bring up Dev tools (Right click, inspect, console)</p></li>
<li><p>Step 2: Do you see <strong><code>[ᵐ°dᵘ⁄o]</code></strong> logo and a list of management commands? If
there are too many warnings, consider hiding them. Look for a little arrow
between <code>[MAIN THREAD]</code> and <code>Object { }</code>. Click on that arrow (and possibly a
<code>&lt;prototype&gt;</code> arrow), to expand the full command menu.</p></li>
<li><p>Step 3: Click the little arrow next to a command to run it, such as <code>build</code>
or <code>edit</code></p></li>
</ol>
<h5 id="example2custombuildbundle">Example #2: Custom Build + Bundle</h5>
<p>Note that in the HTML example, <code>ht</code>, <code>he</code>, <code>bo</code>, and <code>js</code> tags get swapped with <code>html</code>,
<code>head</code>, <code>body</code> and <code>script</code> tags respectively. This prevents various mistakes
in some cases with unsuual syntax and HTML DOM behavior around these special
tags (e.g. closing script tags).</p><x-quickdemo mode="modulo" demo="modulo_embed" value="&lt;Artifact name=html prefix=&quot;&lt;!DOCTYPE html&gt;&quot; build=mybundle&gt;
    &lt;ht lang=&quot;en&quot;&gt;
        &lt;he&gt;
            &lt;title&gt;Test Title&lt;/title&gt;
            &lt;meta charset=&quot;utf8&quot; /&gt;
            &lt;link rel=&quot;stylesheet&quot; href=&quot;{{ definitions._artifact_css.path }}&quot;&gt;&lt;/link&gt;
            &lt;js defer src=&quot;{{ definitions._artifact_js.path }}&quot;&gt;&lt;/js&gt;
        &lt;/he&gt;
        &lt;bo&gt;
            {{ doc.body.innerHTML|minifyhtml|safe }}
        &lt;/bo&gt;
    &lt;/ht&gt;
&lt;/Artifact&gt;

&lt;Artifact name=css -bundle=&quot;modstyle&quot; build=mybundle&gt;
    {% for id in def.ids %}
        {# Include each Modulo-generated style, with minify filter applied #}
        {{ def.data|get:id|minify|safe }}
    {% endfor %}
&lt;/Artifact&gt;

&lt;Artifact name=js -bundle=&quot;modscript&quot; build=mybundle&gt;
    {% for id in def.ids %}
        {# Include each Modulo-generated script, with minify filter applied #}
        {{ def.data|get:id|minify|safe }}
    {% endfor %}
    {% for name in config.modulo.build.mainmodules %}
        {# Call all &quot;main&quot; modules, running Configuration + Component reg #}
        modulo.registry.modules.{{ name }}.call(window, modulo);
    {% endfor %}
&lt;/Artifact&gt;

&lt;script Configuration&gt;
    // Very simple minifying functions to scrub whitespace and remove comments
    modulo.templateFilter.minify = function (s) {
        return s.replace(/\/\*[^\*\!][\s\S]*?\*\/|\/\/.*$/gm, '')
                .replace(/[\n \t]+/gm, ' ')
    }

    modulo.templateFilter.minifyhtml = function (s) {
        return s.replace(/&lt;!--.*?--&gt;/gm, ' ')
                .replace(/[\n \t]+/gm, ' ')
    }
&lt;/script&gt;

&lt;Component name=App&gt;
    &lt;Template&gt;
        &lt;!-- These comments... they should be REMOVED! --&gt;
        &lt;button on.click=script.runBuild&gt;
            &lt;!-- remove me --&gt;
            RUN &quot;mybundle&quot;
        &lt;/button&gt;
        &lt;!-- These comments... they should be REMOVED! --&gt;
    &lt;/Template&gt;
    &lt;Script&gt;
        /* COMMENTS should be removed from scripts! */
        function runBuild () {
            modulo.argv = [ 'mybundle' ] // (set directly)
            modulo.command.mybundle(modulo) // (run directly)
        }
    &lt;/Script&gt;
&lt;/Component&gt;
" modulo-mount-html=""></x-quickdemo>
</div>
                
            
        </main>
    </div></x-page></body></html>